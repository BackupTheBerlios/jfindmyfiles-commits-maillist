<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Jfindmyfiles-commits] r239 - in trunk: docs	project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs	project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/jfindmyfiles-commits/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:jfindmyfiles-commits%40lists.berlios.de?Subject=Re%3A%20%5BJfindmyfiles-commits%5D%20r239%20-%20in%20trunk%3A%20docs%0A%09project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs%0A%09project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes&In-Reply-To=%3C200807211647.m6LGlHXI023629%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000233.html">
   <LINK REL="Next"  HREF="000235.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Jfindmyfiles-commits] r239 - in trunk: docs	project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs	project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes</H1>
    <B>knitter at mail.berlios.de</B> 
    <A HREF="mailto:jfindmyfiles-commits%40lists.berlios.de?Subject=Re%3A%20%5BJfindmyfiles-commits%5D%20r239%20-%20in%20trunk%3A%20docs%0A%09project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs%0A%09project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes&In-Reply-To=%3C200807211647.m6LGlHXI023629%40sheep.berlios.de%3E"
       TITLE="[Jfindmyfiles-commits] r239 - in trunk: docs	project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs	project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes">knitter at mail.berlios.de
       </A><BR>
    <I>Mon Jul 21 18:47:18 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000233.html">[Jfindmyfiles-commits] r238 - trunk/docs
</A></li>
        <LI>Next message: <A HREF="000235.html">[Jfindmyfiles-commits] r240 - in trunk/project/JFindMyFiles:	JFindMyFilesGui/test/unit/src JFindMyFilesGui/test/unit/src/de	JFindMyFilesGui/test/unit/src/de/berlios	JFindMyFilesGui/test/unit/src/de/berlios/jfindmyfiles	JFindMyFilesGui/test/unit/src/de/berlios/jfindmyfiles/jfindmyfilesgui	JFindMyFilesGui/test/unit/src/de/berlios/jfindmyfiles/jfindmyfilesgui/utils	ReadingFiles/test/unit/src ReadingFiles/test/unit/src/de	ReadingFiles/test/unit/src/de/berlios	ReadingFiles/test/unit/src/de/berlios/jfindmyfiles	ReadingFiles/test/unit/src/de/berlios/jfindmyfiles/readingfiles	ReadingFiles/test/unit/src/de/berlios/jfindmyfiles/readingfiles/utils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#234">[ date ]</a>
              <a href="thread.html#234">[ thread ]</a>
              <a href="subject.html#234">[ subject ]</a>
              <a href="author.html#234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: knitter
Date: 2008-07-21 18:47:11 +0200 (Mon, 21 Jul 2008)
New Revision: 239

Modified:
   trunk/docs/JFindMyFiles.doc
   trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.form
   trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.java
   trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/CatalogChildren.java
   trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupChildren.java
   trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupNode.java
Log:
Actualiza?\195?\167?\195?\181es ao relat?\195?\179rio.
Actualiza?\195?\167?\195?\181es no c?\195?\179digo.

Modified: trunk/docs/JFindMyFiles.doc
===================================================================
(Binary files differ)

Modified: trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.form
===================================================================
--- trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.form	2008-07-21 16:03:22 UTC (rev 238)
+++ trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.form	2008-07-21 16:47:11 UTC (rev 239)
@@ -104,12 +104,12 @@
                           &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;jlblDiskName&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jtfDiskName&quot; alignment=&quot;0&quot; pref=&quot;282&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jtfDiskName&quot; alignment=&quot;0&quot; pref=&quot;288&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;jlblCatalog&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jcbxCatalog&quot; alignment=&quot;0&quot; pref=&quot;143&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jcbxCatalog&quot; alignment=&quot;0&quot; pref=&quot;149&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;

Modified: trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.java
===================================================================
--- trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.java	2008-07-21 16:03:22 UTC (rev 238)
+++ trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/dialogs/NewDiskDlg.java	2008-07-21 16:47:11 UTC (rev 239)
@@ -98,7 +98,7 @@
             jbtngrpDrives.add(toggle);
             jpButtons.add(toggle);
         }
-        toggle = new JToggleButton(&quot;Browse&quot;); //TODO i18n
+        toggle = new JToggleButton(&quot;Browse&quot;); //TODO: i18n
         toggle.setIcon(fsv.getSystemIcon(new File(System.getProperty(&quot;user.dir&quot;))));
         toggle.setSize(toggle.getWidth(), 24);
 
@@ -380,7 +380,8 @@
                 scanningDlg.showCentered(ask4Description, showAgain);
             }
         });
-        DiskGroup g = !jcbxCatalog.getSelectedItem().toString().equalsIgnoreCase(&quot;---&quot;) ? (DiskGroup)jcbxCatalog.getSelectedItem() : null;
+        DiskGroup g = jcbxCatalog.getSelectedItem().toString().equals(&quot;---&quot;) ? null : (DiskGroup)jcbxCatalog.getSelectedItem();
+        System.err.println(&quot;GGGGG::::::::::::::::::::::::::::::::::::::::::::: &quot; + g);
         r.read(new File(currentSelectedPath), calculateHash, isMedia, jtfDiskName.getText().trim(), g);
     }
 }//GEN-LAST:event_jbtnScanActionPerformed

Modified: trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/CatalogChildren.java
===================================================================
--- trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/CatalogChildren.java	2008-07-21 16:03:22 UTC (rev 238)
+++ trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/CatalogChildren.java	2008-07-21 16:47:11 UTC (rev 239)
@@ -90,8 +90,8 @@
 
     @SuppressWarnings(&quot;unchecked&quot;)
     public void diskGroupRemoved(CatalogEngineEvent evt) {
-        if (evt.getNewDiskGroup().getParent() == null) {
-            items.remove(evt.getNewDiskGroup());
+        if (evt.getOldDiskGroup().getParent() == null) {
+            items.remove(evt.getOldDiskGroup());
             addNotify();
         }
     }

Modified: trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupChildren.java
===================================================================
--- trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupChildren.java	2008-07-21 16:03:22 UTC (rev 238)
+++ trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupChildren.java	2008-07-21 16:47:11 UTC (rev 239)
@@ -80,15 +80,17 @@
 
     @SuppressWarnings(&quot;unchecked&quot;)
     public void diskGroupAdded(CatalogEngineEvent evt) {
-        if (evt.getNewDiskGroup().getId().equals(parentId)) {
+        if (evt.getNewDiskGroup().getParent() != null &amp;&amp; evt.getNewDiskGroup().getParent().getId().equals(parentId)) {
             items.add(evt.getNewDiskGroup());
             addNotify();
         }
+        System.err.println(&quot;ADICIONADO GRUPO COM NOME:&quot; + evt.getNewDiskGroup());
+        System.err.println(&quot;PERTENCE? &quot; + parentId + &quot;/&quot; + evt.getNewDiskGroup().getParent() == null ? null : evt.getNewDiskGroup().getParent().getId());
     }
 
     @SuppressWarnings(&quot;unchecked&quot;)
     public void diskGroupRemoved(CatalogEngineEvent evt) {
-        if (evt.getOldDiskGroup().getId().equals(parentId)) {
+        if (evt.getOldDiskGroup().getParent() != null &amp;&amp; evt.getOldDiskGroup().getParent().getId().equals(parentId)) {
             items.remove(evt.getOldDiskGroup());
             addNotify();
         }
@@ -104,6 +106,8 @@
             items.add(evt.getNewDisk());
             addNotify();
         }
+        System.err.println(&quot;ADICIONADO DISCO COM NOME:&quot; + evt.getNewDisk());
+        System.err.println(&quot;PERTENCE? &quot; + parentId + &quot;/&quot; + evt.getNewDisk().getGroup() == null ? null : evt.getNewDisk().getGroup().getId());
     }
 
     @SuppressWarnings(&quot;unchecked&quot;)

Modified: trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupNode.java
===================================================================
--- trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupNode.java	2008-07-21 16:03:22 UTC (rev 238)
+++ trunk/project/JFindMyFiles/JFindMyFilesGui/src/de/berlios/jfindmyfiles/jfindmyfilesgui/nodes/DiskGroupNode.java	2008-07-21 16:47:11 UTC (rev 239)
@@ -19,6 +19,7 @@
  */
 package de.berlios.jfindmyfiles.jfindmyfilesgui.nodes;
 
+import de.berlios.jfindmyfiles.catalog.CatalogEngine;
 import de.berlios.jfindmyfiles.catalog.CatalogEngineEvent;
 import de.berlios.jfindmyfiles.catalog.CatalogEngineListener;
 import de.berlios.jfindmyfiles.catalog.entities.DiskGroup;
@@ -48,6 +49,7 @@
         super((leaf ? Children.LEAF : new DiskGroupChildren(group.getId())), Lookups.singleton(group));
         setName(group.getName());
         this.group = group;
+        Lookup.getDefault().lookup(CatalogEngine.class).addListener(this);
         Lookup lo = Lookups.forPath(&quot;/Actions&quot;);//TODO: sort actions correctly and add separators
         sysact = new SystemAction[]{lo.lookup(AcRemove.class), lo.lookup(AcItemProperties.class),
                     lo.lookup(AcRenumberDisks.class), lo.lookup(AcNewDisk.class), lo.lookup(AcNewGroup.class)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000233.html">[Jfindmyfiles-commits] r238 - trunk/docs
</A></li>
	<LI>Next message: <A HREF="000235.html">[Jfindmyfiles-commits] r240 - in trunk/project/JFindMyFiles:	JFindMyFilesGui/test/unit/src JFindMyFilesGui/test/unit/src/de	JFindMyFilesGui/test/unit/src/de/berlios	JFindMyFilesGui/test/unit/src/de/berlios/jfindmyfiles	JFindMyFilesGui/test/unit/src/de/berlios/jfindmyfiles/jfindmyfilesgui	JFindMyFilesGui/test/unit/src/de/berlios/jfindmyfiles/jfindmyfilesgui/utils	ReadingFiles/test/unit/src ReadingFiles/test/unit/src/de	ReadingFiles/test/unit/src/de/berlios	ReadingFiles/test/unit/src/de/berlios/jfindmyfiles	ReadingFiles/test/unit/src/de/berlios/jfindmyfiles/readingfiles	ReadingFiles/test/unit/src/de/berlios/jfindmyfiles/readingfiles/utils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#234">[ date ]</a>
              <a href="thread.html#234">[ thread ]</a>
              <a href="subject.html#234">[ subject ]</a>
              <a href="author.html#234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/jfindmyfiles-commits">More information about the Jfindmyfiles-commits
mailing list</a><br>
</body></html>
